<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Single Recipe</title>
	<!--[if IE]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>

<body id="home">

  <h2>viewing {{ object.title }}</h2>
  <p>Added on {{ object.pub_date | date:"l M d, Y - h:i:s A" }} by {{ object.author }}</p>
  
  <p>Prep Time: {{ object.prepTime }}</p>
  <p>Cook Time: {{ object.cookTime }}</p>
  <p>Total Time: {{ object.totalTime }}</p>
  
  <h4>yields {{ object.yieldAmt }}</h4>
  
  <div id="ingredients">
    <p>Ingredients</p>
    <ul>
    {% for key, value in ingredList %}
      <li>{{ key }} : {{ value }}</li>
    {% endfor %}
    </ul>
  </div>
  
    <div id="methods">
    <p>Method</p>
    <ul>
    {% for key, value in methodList %}
      <li>{{ key }} : {{ value }}</li>
    {% endfor %}
    </ul>
  </div>
  
  {% if object.notes %}
    <p>notes : {{ object.notes }}</p>
  {% endif %}
  
  
  <h3>Tags</h3>
  <ul>
    {% for tag in object.tags.all %}
    <li>
      {{ tag.name }}
    </li>
    {% endfor %}
  </ul>
  
  <input type="button" id="like" name="{{ object.slug }}" value="Like">
  

  <a href="{% url 'myrecipe:edit' recipe.slug %}">Edit</a>
  <a href="{% url 'myrecipe:deleteRecipe' recipe.slug %}">Delete</a>
  
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    $(document).ready(function(){
      $('#like').click(function(){
        $.ajax({
          type:     "POST",
          url:      "/myrecipe/like/",
          data:     {'slug': $(this).attr('name')},
          dataType: 'json',
          
          success: function(data, textstatus, jqXHR){
          console.log("success!");
          console.log(data);
          console.log(textstatus);
          console.log(data.responseText);
          window.location = data['redirectUrl'];
          },
          
          error: function(data, textstatus, jqXHR){
          console.log("error!");
          console.log(data);
          console.log(textstatus);
          console.log(data.responseText);
        }
        });
      });
    });
  </script>
  

</body>
</html>