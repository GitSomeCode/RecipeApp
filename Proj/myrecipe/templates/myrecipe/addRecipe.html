<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Add Recipe</title>
	<!--[if IE]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>

<body id="home">

	<h1>Add a recipe!</h1>
  <form id="recipeform" action="{% url 'myrecipe:newRecipeData' %}" method="POST">
    {% csrf_token %}
    <p  class="formtitles">Title</p> <input id="title" type="text" name="title">
    <p  class="formtitles">yields</p> <input id="yieldAmt" type="number" min="1" name="yieldAmt">
    <p  class="formtitles">Ingredients</p> <input id="ingredients" type="text" name="ingredients">
    <p  class="formtitles">Method</p> <input id="method" type="text" name="method">
    <p  class="formtitles">Prep Time</p> <input id="prepTime" type="number" min="1" name="prepTime">
    <p  class="formtitles">Cook Time</p> <input id="cookTime" type="number" name="cookTime">
    <p  class="formtitles">Notes</p> <input id="notes" type="text" name="notes">
    <p  class="formtitles">tags</p> <input id="tags" type="text" name="tags">
    <input type="submit" value="submit">
  </form>
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    function callingAjax(){
      $.ajax({
        url: "newRecipeData/",
        type: 'POST',
        dataType: 'json',
        headers: {
          'X-CSRFToken': $.cookie('csrftoken')
        },
        data: {
          'title'       :$('#title').val(),
          'yieldAmt'    :$('#yieldAmt').val(),
          'ingredients' :$('#ingredients').val(),
          'method'      :$('#method').val(),
          'prepTime'    :$('#prepTime').val(),
          'cookTime'    :$('#cookTime').val(),
          'notes'       :$('#notes').val(),
          'tags'        :$('#tags').val()
        },
        success: function(data, textstatus, jqXHR){
          console.log("success!");
          console.log(data);
          console.log(textstatus);
          //alert("awesome");
          //document.location = "/";
        },
        error: function(data, textstatus, jqXHR){
          console.log("error!");
          console.log(data);
          console.log(textstatus);
        }
      });
    }
    
    function popu(){
      $('#title').val('Oatmeal Cookies'),
      $('#yieldAmt').val(12),
      $('#ingredients').val(JSON.stringify({1:'oats', 2:'pb'})),
      $('#method').val(JSON.stringify({1:'mix', 2:'bake'})),
      $('#prepTime').val(15),
      $('#cookTime').val(20),
      $('#notes').val('Add chocolate chips'),
      $('#tags').val('healthy, cookies, oats')
    }
    
    $(document).ready(function(){
      
      
      $("#recipeform").submit(function(event){
        event.preventDefault();
        callingAjax();
      })
    });
  </script>
  
</body>
</html>